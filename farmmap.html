<!DOCTYPE html>
<!--from https://developers.google.com/maps/documentation/javascript/kml-->
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>KML Click Capture Sample</title>
    <style>
      html, body {
        height: 370px;
        padding: 0;
        margin: 0;
        }
      #map {
       height: 700px;
       width: 800px;
       overflow: hidden;
       float: left;
       border: thin solid #333;
       }
      #capture {
       height: 700px;
       width: 150px;
       overflow: hidden;
       float: left;
       background-color: #ECECFB;
       border: thin solid #333;
       border-left: none;
       }
      #dummy {
       height: 700px;
       width: 0px;
       overflow: hidden;
       background-color: transparent;
       border: none;
       }
    </style>
  </head>
  <body>
	  <p><h1>What grows in Yolo?</h1></p>
    <div id="map"></div>
    <div id="capture"></div>
    <div id="dummy"></div>
	<br/>
	<section>There is some missing data.  We don't think sprays or GMO are evil.  We think information is good.  We think local trumps organic.  This data exists because of EPA regulations. Made by <a href="enfascination.com">Seth Frey</a>. This <a href="https://github.com/enfascination/yofarmo">code</a> is free to extend to your county.</section>






    <script src="localSettings.js"></script>
    <script>
      var map;
	  var s = localSettings;
      //var src = 'https://developers.google.com/maps/documentation/javascript/examples/kml/westcampus.kml';
      var src = s.KMLUrlPlss;
      // from https://stackoverflow.com/questions/7930660/google-maps-api-v3-kml-layer-changes
      src = src + "?cachebuster=" + (new Date()).getTime();

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          mapTypeId: 'terrain',
          center: new google.maps.LatLng( s.lat, s.lon ),
          zoom: 14,
        });

        var kmlLayer = new google.maps.KmlLayer(src, {
          suppressInfoWindows: true,
          preserveViewport: true,
          map: map
        });

        kmlLayer.addListener('click', function(event) {
          var content = event.featureData.infoWindowHtml;
          var testimonial = document.getElementById('capture');
          testimonial.innerHTML = content;
        });
      }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCssR8inpq24nARHj_AlLlwtQbmH9HMh3U&callback=initMap">
    </script>
  </body>
</html>
